(this["webpackJsonpearthquakes-map-visualizer"]=this["webpackJsonpearthquakes-map-visualizer"]||[]).push([[0],{259:function(e,t,n){},268:function(e,t,n){},294:function(e,t,n){},296:function(e,t,n){},496:function(e,t,n){"use strict";n.r(t);var a,r=n(11),c=n.n(r),i=(n(259),n(62)),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,527)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},o=(n(266),n(61));!function(e){e.EARTHQUAKE_LOADER_TOGGLE="EARTHQUAKE_LOADER_TOGGLE",e.SET_EARTHQUAKE="SET_EARTHQUAKE",e.EARTHQUAKES_LIST_LOADER_TOGGLE="EARTHQUAKES_LIST_LOADER_TOGGLE",e.SET_EARTHQUAKES_LIST="SET_EARTHQUAKES_LIST"}(a||(a={}));var l={isLoading:!1,detail:null},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.EARTHQUAKE_LOADER_TOGGLE:return Object.assign({},e,{isLoading:t.data});case a.SET_EARTHQUAKE:return Object.assign({},e,{detail:t.data});default:return e}},u={isLoading:!1,list:[]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.EARTHQUAKES_LIST_LOADER_TOGGLE:return Object.assign({},e,{isLoading:t.data});case a.SET_EARTHQUAKES_LIST:return Object.assign({},e,{list:t.data});default:return e}},p=Object(o.b)({earthquake:d,earthquakesList:j}),h=Object(o.c)(p),b=n(137),O=n(16),m=n(96),f=n(138),v=n(30),x=n.n(v),g=n(42),E=n(52),_=(n(268),n(217)),w=n(26),T=n(524),L=n(5),A=function(e){return Object(L.jsx)(w.a,{utils:_.a,children:Object(L.jsx)(T.a,{id:e.id,label:e.label,format:"MM/dd/yyyy",value:e.value,disabled:e.disabled,minDate:e.minDate,maxDate:e.maxDate,onChange:function(t){e.onDateChange(t)},KeyboardButtonProps:{"aria-label":"change date"}})})},S=(n(294),n(237)),y=n.n(S),k=n(523),D=function(e){var t=e.loading,n=e.earthquakeDetails;return Object(L.jsx)("div",{className:"detail-view",children:t?Object(L.jsxs)("div",{className:"spinner-container",children:[Object(L.jsx)(k.a,{}),Object(L.jsx)("span",{className:"ml-2",children:"Loading details..."})]}):Object(L.jsx)(L.Fragment,{children:n?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"detail-view__row header",children:[Object(L.jsx)("h2",{className:"title",children:n.id}),Object(L.jsx)("h3",{className:"subtitle",children:n.title})]}),Object(L.jsxs)("div",{className:"detail-view__row details",children:[Object(L.jsx)("div",{className:"detail-view__row-col",children:Object(L.jsxs)("span",{children:[Object(L.jsx)("b",{children:"Location"}),": ",n.location]})}),Object(L.jsx)("div",{className:"detail-view__row-col",children:Object(L.jsxs)("span",{children:[Object(L.jsx)("b",{children:"Date"}),": ",Object(L.jsx)(y.a,{format:"YYYY/MM/DD",children:new Date(n.date).toString()})]})}),Object(L.jsx)("div",{className:"detail-view__row-col",children:Object(L.jsxs)("span",{children:[Object(L.jsx)("b",{children:"Type"}),": ",n.type]})}),Object(L.jsx)("div",{className:"detail-view__row-col",children:Object(L.jsxs)("span",{children:[Object(L.jsx)("b",{children:"Magnitude"}),": ",n.magnitude]})}),Object(L.jsx)("div",{className:"detail-view__row-col",children:Object(L.jsxs)("span",{children:[Object(L.jsx)("b",{children:"State"}),": ",n.state]})})]})]}):Object(L.jsx)("span",{children:"No data"})})})},R=(n(296),n(0)),N=n(73),C=n(239),G=n.n(C),U=n(136),K=n.n(U),Q="https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson",H=function(){var e=Object(g.a)(x.a.mark((function e(t){var n,a,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I(t),a="".concat(Q,"&starttime=").concat(n.starttime),n.endtime&&(a=a.concat("&endtime=".concat(n.endtime))),e.prev=3,e.next=6,fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 6:return r=e.sent,e.next=9,r.json();case 9:if(!(c=e.sent).error){e.next=12;break}throw new Error(c.error);case 12:return e.abrupt("return",Promise.resolve(c));case 15:return e.prev=15,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(g.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Q,"&eventid=").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(a=e.sent).error){e.next=9;break}throw new Error(a.error);case 9:return e.abrupt("return",Promise.resolve(a));case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){return{starttime:e.starttime?z(e.starttime):null,endtime:e.endtime?z(e.endtime):null}},z=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},M=function(e){return{type:a.EARTHQUAKE_LOADER_TOGGLE,data:e}},F=function(e){return{type:a.SET_EARTHQUAKE,data:e}},P=function(e){return{type:a.EARTHQUAKES_LIST_LOADER_TOGGLE,data:e}},B=Object(N.withScriptjs)(Object(N.withGoogleMap)((function(e){var t=e.earthquake,n=e.points,a=Object(R.useState)(),r=Object(E.a)(a,2),c=r[0],i=r[1],s=Object(R.useState)(null),o=Object(E.a)(s,2),l=o[0],d=o[1],u=Object(R.useState)(),j=Object(E.a)(u,2),p=j[0],b=j[1],O=Object(R.useState)(),m=Object(E.a)(O,2),f=m[0],v=m[1];Object(R.useEffect)((function(){if(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1];b({id:t.id,place:t.properties.place,coords:{lat:n,lng:e}})}}),[]);var _=function(e){return new google.maps.LatLng(e.coords.lat,e.coords.lng)};Object(R.useEffect)((function(){if(c)if(p)v({zoom:8,center:new google.maps.LatLng(p.coords.lat,p.coords.lng)});else if(n&&n.length>0){var e=n.map((function(e){return _(e)})),t=new google.maps.LatLngBounds;e.forEach((function(e){t.extend(e)})),c.fitBounds(t)}else v({zoom:2,center:new google.maps.LatLng(0,0)})}),[c,n]);var w=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.dispatch(M(!0)),e.next=3,q(t);case 3:n=e.sent,h.dispatch(F(n)),h.dispatch(M(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){return Object(L.jsx)(N.Marker,{position:{lat:e.coords.lat,lng:e.coords.lng},onClick:function(){return t=e.id,void d(l&&l===t?null:t);var t},children:l===e.id&&Object(L.jsx)(K.a,{onCloseClick:function(){return d(null),void h.dispatch(F(null))},children:Object(L.jsxs)("div",{style:{padding:"8px"},children:[Object(L.jsx)("h4",{style:{fontSize:"20px"},children:e.id}),Object(L.jsx)("p",{style:{fontSize:"16px"},children:e.place}),Object(L.jsx)("button",{style:{color:"#fff",backgroundColor:"#3a86ff",fontSize:"16px",padding:"4px 12px",border:"none"},onClick:function(){return w(e.id)},children:"Show details"})]})})},e.id)};return Object(L.jsx)("div",{className:"map-container",children:Object(L.jsx)(N.GoogleMap,{zoom:null===f||void 0===f?void 0:f.zoom,center:null===f||void 0===f?void 0:f.center,ref:function(e){i(e)},options:{streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1},children:p||n&&n.length>0?p?T(p):Object(L.jsx)(G.a,{onClick:e.onMarkerClustererClick,averageCenter:!0,enableRetinaIcons:!0,gridSize:60,children:n.map((function(e){return T(e)}))}):Object(L.jsx)(L.Fragment,{})})})}))),Y=Object(i.b)((function(e){return e}))((function(e){var t=e.earthquake,n=e.earthquakesList;return Object(L.jsx)("div",{className:"map-view",children:n.isLoading||t.isLoading&&0===n.list.length?Object(L.jsx)("div",{className:"spinner-wrapper",children:Object(L.jsx)(k.a,{size:120})}):Object(L.jsx)(B,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBtOeZyBGEnUICAbmglmlnd5STW9wXcqcQ","&libraries=places&language=es"),loadingElement:Object(L.jsx)("div",{style:{height:"100%"}}),containerElement:Object(L.jsx)("div",{style:{height:"100%"}}),mapElement:Object(L.jsx)("div",{style:{height:"100%"}}),earthquake:t.detail,points:n.list})})})),J=function(e){return{id:e.id,location:e.properties.place,title:e.properties.title,date:e.properties.updated,type:e.properties.type,magnitude:e.properties.mag,state:e.properties.status}},V=Object(i.b)((function(e){return e.earthquake}))((function(e){var t=e.isLoading,n=e.detail,r=Object(R.useState)({starttime:null,endtime:null}),c=Object(E.a)(r,2),i=c[0],s=c[1],o=Object(O.e)(),l=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d()){e.next=7;break}return h.dispatch(M(!0)),e.next=4,q(d());case 4:t=e.sent,h.dispatch(F(t)),h.dispatch(M(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){return new URLSearchParams(o.location.search).get("id")};Object(R.useEffect)((function(){l()}),[]),Object(R.useEffect)((function(){n&&o.push("?id=".concat(n.id))}),[n]);var u=function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.dispatch(P(!0)),e.next=3,H(i);case 3:t=e.sent,h.dispatch((n=t.features.filter((function(e){return"Point"===e.geometry.type})).map((function(e){return{id:e.id,place:e.properties.place,coords:{lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]}}})),{type:a.SET_EARTHQUAKES_LIST,data:n})),h.dispatch(P(!1));case 6:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();Object(R.useEffect)((function(){i.starttime&&u()}),[i]);var j=function(e,t){t&&(h.dispatch(F(null)),s(Object(f.a)(Object(f.a)({},i),{},Object(m.a)({},e,"Invalid Date"!==t.toString()?t:null))))};return Object(L.jsxs)("div",{className:"app",children:[Object(L.jsx)("header",{className:"app__header",children:Object(L.jsxs)("div",{className:"app__header-navbar",children:[Object(L.jsx)("h2",{className:"app-title",children:"Earthquakes Map Visualizer"}),Object(L.jsxs)("div",{className:"date-inputs",children:[Object(L.jsx)("div",{className:"date-inputs__elem",children:Object(L.jsx)(A,{id:"from-date",label:"From date",value:i.starttime,disabled:!1,maxDate:new Date,onDateChange:function(e){return j("starttime",e)}})}),Object(L.jsx)("div",{className:"date-inputs__elem",children:Object(L.jsx)(A,{id:"to-date",label:"To date",value:i.endtime,disabled:!i.starttime,minDate:i.starttime,maxDate:new Date,onDateChange:function(e){return j("endtime",e)}})})]})]})}),Object(L.jsxs)("section",{className:"app__views",children:[Object(L.jsx)("div",{className:"app__views-elem map",children:Object(L.jsx)(Y,{})}),Object(L.jsx)("div",{className:"app__views-elem detail",children:t||n?Object(L.jsx)(D,{loading:t,earthquakeDetails:n?J(n):null}):Object(L.jsx)(L.Fragment,{})})]})]})})),W=function(){return Object(L.jsx)(b.a,{children:Object(L.jsx)(O.a,{path:"/",component:V})})};c.a.render(Object(L.jsx)(i.a,{store:h,children:Object(L.jsx)(W,{})}),document.getElementById("root")),s()}},[[496,1,2]]]);
//# sourceMappingURL=main.2023dfbe.chunk.js.map