(this["webpackJsonpearthquakes-map-visualizer"]=this["webpackJsonpearthquakes-map-visualizer"]||[]).push([[0],{252:function(e,t,n){},260:function(e,t,n){},286:function(e,t,n){},288:function(e,t,n){},486:function(e,t,n){"use strict";n.r(t);var a,r=n(11),c=n.n(r),i=(n(252),n(97)),s=n(91),o=n(132),l=n(31),d=n.n(l),u=n(44),j=n(58),p=(n(260),n(210)),b=n(24),h=n(514),O=n(5),m=function(e){return Object(O.jsx)(b.a,{utils:p.a,children:Object(O.jsx)(h.a,{id:e.id,label:e.label,format:"MM/dd/yyyy",value:e.value,onChange:function(t){t&&e.onDateChange(t)},KeyboardButtonProps:{"aria-label":"change date"}})})},f=(n(286),n(230)),x=n.n(f),v=n(513),g=function(e){var t=e.loading,n=e.earthquakeDetails;return Object(O.jsx)("div",{className:"detail-view",children:t?Object(O.jsxs)("div",{className:"spinner-container",children:[Object(O.jsx)(v.a,{}),Object(O.jsx)("span",{className:"ml-2",children:"Loading details..."})]}):Object(O.jsx)(O.Fragment,{children:n?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"detail-view__row header",children:[Object(O.jsx)("h2",{className:"title",children:n.id}),Object(O.jsx)("h3",{className:"subtitle",children:n.title})]}),Object(O.jsxs)("div",{className:"detail-view__row details",children:[Object(O.jsx)("div",{className:"detail-view__row-col",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("b",{children:"Location"}),": ",n.location]})}),Object(O.jsx)("div",{className:"detail-view__row-col",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("b",{children:"Date"}),": ",Object(O.jsx)(x.a,{format:"YYYY/MM/DD",children:new Date(n.date).toString()})]})}),Object(O.jsx)("div",{className:"detail-view__row-col",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("b",{children:"Type"}),": ",n.type]})}),Object(O.jsx)("div",{className:"detail-view__row-col",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("b",{children:"Magnitude"}),": ",n.magnitude]})}),Object(O.jsx)("div",{className:"detail-view__row-col",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("b",{children:"State"}),": ",n.state]})})]})]}):Object(O.jsx)("span",{children:"No data"})})})},w=(n(288),n(0)),_=n(68),y=n(232),E=n.n(y),N=n(131),k=n.n(N),C="https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson",T=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S(t),a="".concat(C,"&starttime=").concat(n.starttime),n.endtime&&(a=a.concat("&endtime=".concat(n.endtime))),e.prev=3,e.next=6,fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 6:return r=e.sent,e.next=9,r.json();case 9:if(!(c=e.sent).error){e.next=12;break}throw new Error(c.error);case 12:return e.abrupt("return",Promise.resolve(c));case 15:return e.prev=15,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(C,"&eventid=").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(!(a=e.sent).error){e.next=9;break}throw new Error(a.error);case 9:return e.abrupt("return",Promise.resolve(a));case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){return{starttime:A(e.starttime),endtime:e.endtime?A(e.endtime):null}},A=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},D=n(55);!function(e){e.LOADER_TOGGLE="LOADER_TOGGLE",e.SET_EARTHQUAKE="SET_EARTHQUAKE"}(a||(a={}));var G={isLoading:!1,detail:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOADER_TOGGLE:return Object.assign({},e,{isLoading:t.data});case a.SET_EARTHQUAKE:return Object.assign({},e,{detail:t.data});default:return e}},q=Object(D.b)({earthquake:M}),R=Object(D.c)(q),z=function(e){return{type:a.LOADER_TOGGLE,data:e}},F=function(e){return{type:a.SET_EARTHQUAKE,data:e}},P=Object(_.withScriptjs)(Object(_.withGoogleMap)((function(e){var t=e.points,n=Object(w.useState)(null),a=Object(j.a)(n,2),r=a[0],c=a[1],i=function(e){return new google.maps.LatLng(e.coords.lat,e.coords.lng)};Object(w.useEffect)((function(){if(r){var e=t.map((function(e){return i(e)})),n=new google.maps.LatLngBounds;e.forEach((function(e){n.extend(e)})),r.fitBounds(n)}}),[r,t]);var s=Object(w.useState)(null),o=Object(j.a)(s,2),l=o[0],p=o[1],b=function(){var e=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.dispatch(z(!0)),e.next=3,L(t);case 3:n=e.sent,R.dispatch(F(n)),R.dispatch(z(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"map-container",children:Object(O.jsx)(_.GoogleMap,{ref:function(e){c(e)},options:{streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1},children:Object(O.jsx)(E.a,{onClick:e.onMarkerClustererClick,averageCenter:!0,enableRetinaIcons:!0,gridSize:60,children:t.map((function(e){return Object(O.jsx)(_.Marker,{position:{lat:e.coords.lat,lng:e.coords.lng},onClick:function(){return t=e.id,void p(l&&l===t?null:t);var t},children:l===e.id&&Object(O.jsx)(k.a,{onCloseClick:function(){return p(null),void R.dispatch(F(null))},children:Object(O.jsxs)("div",{style:{padding:"8px"},children:[Object(O.jsx)("h4",{style:{fontSize:"20px"},children:e.id}),Object(O.jsx)("p",{style:{fontSize:"16px"},children:e.place}),Object(O.jsx)("button",{style:{color:"#fff",backgroundColor:"#3a86ff",fontSize:"16px",padding:"4px 12px",border:"none"},onClick:function(){return b(e.id)},children:"Show details"})]})})},e.id)}))})})})}))),B=function(e){return Object(O.jsx)("div",{className:"map-view",children:e.points?Object(O.jsx)(P,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBtOeZyBGEnUICAbmglmlnd5STW9wXcqcQ","&libraries=places&language=es"),loadingElement:Object(O.jsx)("div",{style:{height:"100%"}}),containerElement:Object(O.jsx)("div",{style:{height:"100%"}}),mapElement:Object(O.jsx)("div",{style:{height:"100%"}}),points:e.points}):Object(O.jsx)("div",{className:"spinner-wrapper",children:Object(O.jsx)(v.a,{size:120})})})},U=function(e){return{id:e.id,location:e.properties.place,title:e.properties.title,date:e.properties.updated,type:e.properties.type,magnitude:e.properties.mag,state:e.properties.status}},I=Object(i.b)((function(e){return e.earthquake}))((function(e){var t=e.isLoading,n=e.detail,a=Object(w.useState)({starttime:new Date,endtime:null}),r=Object(j.a)(a,2),c=r[0],i=r[1],l=Object(w.useState)(null),p=Object(j.a)(l,2),b=p[0],h=p[1];Object(w.useEffect)((function(){f()}),[c]);var f=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(null),e.next=3,T(c);case 3:t=e.sent,h(t.features.filter((function(e){return"Point"===e.geometry.type})).map((function(e){return{id:e.id,place:e.properties.place,coords:{lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]}}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e,t){R.dispatch(F(null)),i(Object(o.a)(Object(o.a)({},c),{},Object(s.a)({},e,t)))};return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)("header",{className:"app__header",children:Object(O.jsxs)("div",{className:"app__header-navbar",children:[Object(O.jsx)("h2",{className:"app-title",children:"Earthquakes Map Visualizer"}),Object(O.jsxs)("div",{className:"date-inputs",children:[Object(O.jsx)("div",{className:"date-inputs__elem",children:Object(O.jsx)(m,{id:"from-date",label:"From date",value:c.starttime,onDateChange:function(e){return x("starttime",e)}})}),Object(O.jsx)("div",{className:"date-inputs__elem",children:Object(O.jsx)(m,{id:"to-date",label:"To date",value:c.endtime,onDateChange:function(e){return x("endtime",e)}})})]})]})}),Object(O.jsxs)("section",{className:"app__views",children:[Object(O.jsx)("div",{className:"app__views-elem map",children:Object(O.jsx)(B,{points:b})}),Object(O.jsx)("div",{className:"app__views-elem detail",children:t||n?Object(O.jsx)(g,{loading:t,earthquakeDetails:n?U(n):null}):Object(O.jsx)(O.Fragment,{})})]})]})})),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,517)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};n(485);c.a.render(Object(O.jsx)(i.a,{store:R,children:Object(O.jsx)(I,{})}),document.getElementById("root")),K()}},[[486,1,2]]]);
//# sourceMappingURL=main.0448ebaf.chunk.js.map